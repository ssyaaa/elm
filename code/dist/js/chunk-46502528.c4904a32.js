(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46502528"],{"13d5":function(t,a,o){"use strict";var s=o("23e7"),i=o("d58f").left,e=o("a640"),n=o("ae40"),r=e("reduce"),c=n("reduce",{1:0});s({target:"Array",proto:!0,forced:!r||!c},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1597:function(t,a,o){t.exports=o.p+"img/reduce.c6e54c55.png"},"1d89":function(t,a,o){t.exports=o.p+"img/add.140aab53.png"},5127:function(t,a,o){"use strict";o.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"navBar"},[s("van-row",[s("van-col",{attrs:{span:"4"}},[s("van-icon",{staticStyle:{"margin-left":"20px","margin-top":"8px"},attrs:{color:"#ffff",name:"arrow-left",size:"20px"},on:{click:function(a){return t.$router.go(-1)}}})],1),s("van-col",{attrs:{span:"16"}}),s("van-col",{attrs:{span:"2"}},[s("van-icon",{staticStyle:{"margin-top":"8px"},attrs:{name:"search",color:"#ffff",size:"20px"}})],1),s("van-col",{attrs:{span:"2"}},[s("van-icon",{staticStyle:{"margin-top":"8px"},attrs:{color:"#ffff",name:"close",size:"20px"},on:{click:function(a){return t.$router.go(-1)}}})],1)],1)],1),s("div",{staticClass:"content1"},[s("div",{staticClass:"headPhoto"},[s("img",{attrs:{src:t.foodShop.img,alt:""}})]),s("h2",[t._v(t._s(t.foodShop.foodName))]),s("van-row",{staticClass:"detail"},[s("van-col",{attrs:{span:"6"}}),s("van-col",{attrs:{span:"3"}},[t._v("评价"+t._s(t.foodShop.start))]),s("van-col",{attrs:{span:"4"}},[t._v("月售"+t._s(t.foodShop.xiaoshou))]),s("van-col",{attrs:{span:"8"}},[t._v("蜂鸟专送约30分钟")]),s("van-col",{attrs:{span:"3"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.like,expression:"like"}],staticClass:"like",attrs:{src:o("c2b5")},on:{click:t.likeBlack}}),s("img",{directives:[{name:"show",rawName:"v-show",value:t.like2,expression:"like2"}],staticClass:"like",attrs:{src:o("94f9")},on:{click:t.likeRed}})])],1),s("van-collapse",{model:{value:t.activeNames,callback:function(a){t.activeNames=a},expression:"activeNames"}},[s("van-collapse-item",{attrs:{name:"2"}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("van-tag",{staticStyle:{"margin-left":"15%"},attrs:{color:"#f2826a",plain:""}},[t._v(t._s(t.foodShop.twoTag1))]),s("van-tag",{staticStyle:{"margin-left":"2%"},attrs:{color:"#f2826a",plain:""}},[t._v(t._s(t.foodShop.twoTag2))]),s("van-tag",{staticStyle:{"margin-left":"2%"},attrs:{color:"#f2826a",plain:""}},[t._v("配送费优惠")]),s("span",{staticClass:"youhui"},[t._v("3个优惠")])],1),s("h4",[t._v("优惠")]),s("p",[s("van-tag",{attrs:{color:"#f2826a",plain:""}},[t._v("满减")]),t._v(" 满"+t._s(t.foodShop.twoTag1)+"元，满"+t._s(t.foodShop.twoTag2)+"元")],1),s("p",[s("van-tag",{attrs:{color:"#caa073",plain:""}},[t._v("会员")]),t._v(" 超级会员领6元无门槛红包")],1),s("p",[s("van-tag",{attrs:{color:"#f2826a",plain:""}},[t._v("配送")]),t._v(" 配送费立减3元")],1),s("h4",[t._v("服务")]),s("p",[s("van-tag",{attrs:{color:"#c1c1c1",plain:""}},[t._v("食无忧")]),t._v(" 该商户已购买食品安全责任险，食品安全有保障。")],1)])],1),s("van-tabs",{attrs:{color:"#2395ff"},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[s("van-tab",{attrs:{title:"点餐"}},[s("div",{staticClass:"jianju"}),s("van-tree-select",{attrs:{height:"130vw",items:t.foodShop.items,"main-active-index":t.active1},on:{"update:mainActiveIndex":function(a){t.active1=a},"update:main-active-index":function(a){t.active1=a}}},[s("template",{slot:"content"},t._l(t.foodShop.items,(function(a,i){return s("div",{key:i},[t.active1===i?s("div",{staticClass:"foodsList"},[s("div",{staticClass:"title"},[s("h4",[t._v(t._s(a.text))])]),t._l(a.fooddetail,(function(a,i){return s("van-card",{key:i,attrs:{title:a.name,thumb:a.img}},[s("div",{attrs:{slot:"tags"},slot:"tags"},[s("p",{staticClass:"decs"},[t._v(t._s(a.dec))]),s("p",{staticClass:"decs"},[t._v("月售"+t._s(a.month))]),s("van-tag",{staticStyle:{"margin-top":"5px"},attrs:{plain:"",type:"danger"}},[t._v("8.2折")]),s("span",{staticClass:"youhui"},[t._v("每单限1份优惠")]),s("p",{staticClass:"price"},[t._v("￥"+t._s(a.meny))])],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"button1",on:{click:function(o){return t.reduce(a)}}},[s("img",{attrs:{src:o("1597"),alt:""}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:a.num,expression:"item.num"}],staticClass:"num",attrs:{type:"text"},domProps:{value:a.num},on:{input:function(o){o.target.composing||t.$set(a,"num",o.target.value)}}}),s("div",{staticClass:"button",on:{click:function(o){return t.add(a)}}},[s("img",{attrs:{src:o("1d89"),alt:""}})])])])})),s("div",{staticClass:"space"})],2):t._e()])})),0)],2)],1),s("van-tab",{attrs:{title:"评价"}},[t._v("内容 2")]),s("van-tab",{attrs:{title:"商家"}},[t._v("内容 3")])],1)],1),s("van-goods-action",[s("van-goods-action-icon",{attrs:{icon:"shopping-cart-o",size:"30px",info:t.num,color:"#111"}}),s("div",{staticClass:"ddd"},[s("p",{staticClass:"price"},[t._v("￥"+t._s(t.totals))]),s("p",{staticClass:"peisong"},[t._v("另需配送费￥0元|可自取")])]),s("van-button",{staticClass:"pay",attrs:{color:"#58d178"},on:{click:t.onSubmit}},[t._v("去结算")])],1)],1)},i=[],e=(o("13d5"),{data:function(){return{activeNames:["1"],active:0,activeKey:0,active1:0,foodShop:[],show:!1,pupImg:"",totals:0,num:0,like:!0,like2:!1,isLike:!1}},computed:{username:function(){return this.$store.state.username},buyCartLists:function(){return this.$store.state.buyCartLists},likeList:function(){return this.$store.state.like.likeList}},methods:{add:function(t){t.num++,this.pupImg=t.img,this.sum(),this.nums()},reduce:function(t){!(t.num<=0)&&t.num--,this.sum(),this.nums()},sum:function(){for(var t=0,a=0;a<this.foodShop.items.length;a++)t+=this.foodShop.items[a].fooddetail.reduce((function(t,a){return t+parseInt(a.meny)*parseInt(a.num)}),0);this.totals=t},nums:function(){for(var t=0,a=0;a<this.foodShop.items.length;a++)t+=this.foodShop.items[a].fooddetail.reduce((function(t,a){return t+parseInt(a.num)}),0);this.num=t},onSubmit:function(){var t=this;if(""==this.username)var a=this.$toast.loading({duration:0,forbidClick:!0,message:"未登录，还有 3 秒跳转登录界面"}),o=3,s=setInterval((function(){o--,o?a.message="未登录，还有 ".concat(o," 秒跳转登录界面"):(clearInterval(s),a.clear(),t.$router.push("/login"))}),1e3);else if(0==this.num)this.$toast("请添加商品");else{for(var i=[],e=0;e<this.foodShop.items.length;e++)for(var n=0;n<this.foodShop.items[e].fooddetail.length;n++)this.foodShop.items[e].fooddetail[n].num>0&&i.push({foodName:this.foodShop.foodName,fooddetail:this.foodShop.items[e].fooddetail[n]});this.$store.commit("foodinfo/addBuyCart",i),this.$router.push("/pay")}},likeBlack:function(){this.like=!1,this.like2=!0,this.foodShop["like"]=1,this.$store.commit("like/changeLikeList",this.foodShop),console.log("我的收藏===>",this.likeList),console.log("bu===>",this.foodShop)},likeRed:function(){this.like=!0,this.like2=!1,this.foodShop["like"]=0,this.$store.commit("like/deleteLikeList",this.foodShop.foodShopId),console.log("我的收藏===>",this.likeList),console.log("bu===>",this.foodShop)}},created:function(){var t=this,a=this.$route.params.foodShopId;this.$axios.get("/foods/"+a).then((function(a){t.foodShop=a.data.result})),this.$store.state.vanTabbar=!1},mounted:function(){this.$store.state.vanTabbar=!1},destroyed:function(){this.$store.state.vanTabbar=!0}}),n=e,r=(o("e1ea"),o("2877")),c=Object(r["a"])(n,s,i,!1,null,"0884d834",null);a["default"]=c.exports},"94f9":function(t,a,o){t.exports=o.p+"img/red.6bf72a9b.png"},c2b5:function(t,a,o){t.exports=o.p+"img/black.455fde8f.png"},d58f:function(t,a,o){var s=o("1c0b"),i=o("7b0b"),e=o("44ad"),n=o("50c4"),r=function(t){return function(a,o,r,c){s(o);var l=i(a),u=e(l),d=n(l.length),f=t?d-1:0,v=t?-1:1;if(r<2)while(1){if(f in u){c=u[f],f+=v;break}if(f+=v,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=v)f in u&&(c=o(c,u[f],f,l));return c}};t.exports={left:r(!1),right:r(!0)}},e1ea:function(t,a,o){"use strict";var s=o("e36b"),i=o.n(s);i.a},e36b:function(t,a,o){}}]);
//# sourceMappingURL=chunk-46502528.c4904a32.js.map